webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s={data:function(){return{selectedMonth:"",daysInMonth:[],dailySales:{},attendance:[],employees:[],newEmployeeName:"",products:[],newProductName:"",newProductCommission:0,totalProductSales:{}}},watch:{selectedMonth:function(t){t&&this.resetData()}},methods:{resetData:function(){var t=this,e=new Date(this.selectedMonth+"-01"),a=new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1,0);this.daysInMonth=[],this.attendance=[],this.totalProductSales={};for(var s=function(e){var a=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);t.daysInMonth.push(a),n.default.set(t.dailySales,a,{}),t.products.forEach(function(e){n.default.set(t.dailySales[a],e.name,0),e.name in t.totalProductSales||(t.totalProductSales[e.name]=0)});var s=new Array(t.employees.length).fill(!1);t.attendance.push(s)},o=e;o<=a;o.setDate(o.getDate()+1))s(o)},addEmployee:function(){this.newEmployeeName&&(this.employees.push({name:this.newEmployeeName,totalCommission:0}),this.newEmployeeName="",this.updateAttendance())},addProduct:function(){this.newProductName&&this.newProductCommission>0&&(this.products.push({name:this.newProductName,commission:this.newProductCommission}),this.newProductName="",this.newProductCommission=0,this.resetData())},updateAttendance:function(){this.attendance.forEach(function(t){t.push(!1)})},calculateTotalCommission:function(){var t=this;this.employees.forEach(function(t){t.totalCommission=0}),this.totalProductSales={},this.products.forEach(function(e){t.totalProductSales[e.name]=0}),this.daysInMonth.forEach(function(e,a){t.calculateCommissionForDay(e,a)})},calculateCommissionForDay:function(t,e){var a=this,n=0,s=this.dailySales[t];this.products.forEach(function(t){n+=s[t.name]*t.commission,a.totalProductSales[t.name]+=s[t.name]});var o=0;if(this.attendance[e].forEach(function(t){t&&o++}),0!==o){var l=n/o;this.attendance[e].forEach(function(t,e){t&&(a.employees[e].totalCommission+=l)})}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-header",{staticClass:"page-header"},[a("h1",[t._v("榴吨吨员工提成计算辅助")])])],1)],1),t._v(" "),a("el-row",{staticClass:"input-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticClass:"date-picker",attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM","value-format":"yyyy-MM"},on:{change:t.resetData},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}})],1),t._v(" "),a("el-col",{staticClass:"form-group",attrs:{span:12}},[a("el-input",{staticClass:"employee-input",attrs:{placeholder:"输入员工姓名"},model:{value:t.newEmployeeName,callback:function(e){t.newEmployeeName=e},expression:"newEmployeeName"}}),t._v(" "),a("el-button",{staticClass:"add-button",attrs:{type:"primary"},on:{click:t.addEmployee}},[t._v("添加员工")])],1)],1),t._v(" "),a("el-row",{staticClass:"product-group",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"product-input",attrs:{placeholder:"输入产品名称"},model:{value:t.newProductName,callback:function(e){t.newProductName=e},expression:"newProductName"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input-number",{staticClass:"product-input",attrs:{placeholder:"输入提成"},model:{value:t.newProductCommission,callback:function(e){t.newProductCommission=t._n(e)},expression:"newProductCommission"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"add-button",attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("添加产品")])],1)],1),t._v(" "),t.selectedMonth?a("div",{staticClass:"sales-data"},[t._l(t.daysInMonth,function(e,n){return a("div",{key:n,staticClass:"day-section"},[a("h3",[t._v(t._s(e))]),t._v(" "),a("el-form",{staticClass:"sales-form",attrs:{model:t.dailySales[e],inline:""}},[t._l(t.products,function(n){return a("div",{key:n.name,staticClass:"product-input-group"},[a("el-form-item",{attrs:{label:n.name}},[a("el-input-number",{model:{value:t.dailySales[e][n.name],callback:function(a){t.$set(t.dailySales[e],n.name,t._n(a))},expression:"dailySales[day][product.name]"}})],1)],1)}),t._v(" "),t._l(t.employees,function(e,s){return a("div",{key:s,staticClass:"employee-checkbox"},[a("el-checkbox",{model:{value:t.attendance[n][s],callback:function(e){t.$set(t.attendance[n],s,e)},expression:"attendance[index][empIndex]"}},[t._v("\n            "+t._s(e.name)+"上班\n          ")])],1)})],2)],1)}),t._v(" "),a("el-button",{staticClass:"calculate-button",attrs:{type:"primary"},on:{click:t.calculateTotalCommission}},[t._v("计算总提成")]),t._v(" "),a("el-table",{staticClass:"commission-table",staticStyle:{width:"100%"},attrs:{data:t.employees}},[a("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),t._v(" "),a("el-table-column",{attrs:{label:"总提成"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.totalCommission.toFixed(2))+"\n        ")]}}],null,!1,1745210146)})],1),t._v(" "),a("el-table",{staticClass:"sales-table",staticStyle:{width:"100%"},attrs:{data:t.products}},[a("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"总销量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.totalProductSales[e.row.name])+"\n        ")]}}],null,!1,3061956509)})],1)],2):t._e()],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("qjuh")},"data-v-0782ba82",null).exports,r=a("/ocq"),c={data:function(){return{form:{username:"",password:""}}},methods:{submitForm:function(t){this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!")})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")])],1)],1)},staticRenderFns:[]},u=a("VU/8")(c,i,!1,null,null,null).exports;n.default.use(r.a);var m=new r.a({routes:[{path:"/",name:"HelloWorld",component:u}]}),d=a("zL8q"),p=a.n(d);a("tvR6");n.default.use(p.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:m,components:{App:l},template:"<App/>"})},qjuh:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.512913b5d68dee364f4e.js.map