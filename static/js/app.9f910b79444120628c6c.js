webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),s={data:function(){return{selectedMonth:"",daysInMonth:[],dailySales:{},attendance:[],employees:[],newEmployeeName:"",products:[],newProductName:"",newProductCommission:0}},watch:{selectedMonth:function(e){e&&this.resetData()}},methods:{resetData:function(){var e=this,t=new Date(this.selectedMonth+"-01"),a=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1,0);this.daysInMonth=[],this.attendance=[];for(var n=function(t){var a=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);e.daysInMonth.push(a),e.dailySales[a]={},e.products.forEach(function(t){e.dailySales[a][t.name]=0});var n=new Array(e.employees.length).fill(!1);e.attendance.push(n)},s=t;s<=a;s.setDate(s.getDate()+1))n(s)},addEmployee:function(){this.newEmployeeName&&(this.employees.push({name:this.newEmployeeName,totalCommission:0}),this.newEmployeeName="",this.updateAttendance())},addProduct:function(){this.newProductName&&this.newProductCommission>0&&(this.products.push({name:this.newProductName,commission:this.newProductCommission}),this.newProductName="",this.newProductCommission=0,this.resetData())},updateAttendance:function(){this.attendance.forEach(function(e){e.push(!1)})},calculateTotalCommission:function(){var e=this;this.employees.forEach(function(e){e.totalCommission=0}),this.daysInMonth.forEach(function(t,a){e.calculateCommissionForDay(t,a)})},calculateCommissionForDay:function(e,t){var a=this,n=0,s=this.dailySales[e];this.products.forEach(function(e){n+=s[e.name]*e.commission});var o=0;if(this.attendance[t].forEach(function(e){e&&o++}),0!==o){var l=n/o;this.attendance[t].forEach(function(e,t){e&&(a.employees[t].totalCommission+=l)})}}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-header",{staticClass:"page-header"},[a("h1",[e._v("算工资")])])],1)],1),e._v(" "),a("el-row",{staticClass:"input-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticClass:"date-picker",attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM","value-format":"yyyy-MM"},on:{change:e.resetData},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}})],1),e._v(" "),a("el-col",{staticClass:"form-group",attrs:{span:12}},[a("el-input",{staticClass:"employee-input",attrs:{placeholder:"输入员工姓名"},model:{value:e.newEmployeeName,callback:function(t){e.newEmployeeName=t},expression:"newEmployeeName"}}),e._v(" "),a("el-button",{staticClass:"add-button",attrs:{type:"primary"},on:{click:e.addEmployee}},[e._v("添加员工")])],1)],1),e._v(" "),a("el-row",{staticClass:"product-group",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"product-input",attrs:{placeholder:"输入产品名称"},model:{value:e.newProductName,callback:function(t){e.newProductName=t},expression:"newProductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input-number",{staticClass:"product-input",attrs:{placeholder:"输入提成"},model:{value:e.newProductCommission,callback:function(t){e.newProductCommission=e._n(t)},expression:"newProductCommission"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"add-button",attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("添加产品")])],1)],1),e._v(" "),e.selectedMonth?a("div",{staticClass:"sales-data"},[e._l(e.daysInMonth,function(t,n){return a("div",{key:n,staticClass:"day-section"},[a("h3",[e._v(e._s(t))]),e._v(" "),a("el-form",{staticClass:"sales-form",attrs:{model:e.dailySales[t],inline:""}},[e._l(e.products,function(n){return a("div",{key:n.name,staticClass:"product-input-group"},[a("el-form-item",{attrs:{label:n.name}},[a("el-input-number",{model:{value:e.dailySales[t][n.name],callback:function(a){e.$set(e.dailySales[t],n.name,e._n(a))},expression:"dailySales[day][product.name]"}})],1)],1)}),e._v(" "),e._l(e.employees,function(t,s){return a("div",{key:s,staticClass:"employee-checkbox"},[a("el-checkbox",{model:{value:e.attendance[n][s],callback:function(t){e.$set(e.attendance[n],s,t)},expression:"attendance[index][empIndex]"}},[e._v("\n            "+e._s(t.name)+"上班\n          ")])],1)})],2)],1)}),e._v(" "),a("el-button",{staticClass:"calculate-button",attrs:{type:"primary"},on:{click:e.calculateTotalCommission}},[e._v("计算总提成")]),e._v(" "),a("el-table",{staticClass:"commission-table",staticStyle:{width:"100%"},attrs:{data:e.employees}},[a("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),e._v(" "),a("el-table-column",{attrs:{label:"总提成"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.totalCommission.toFixed(2))+"\n        ")]}}],null,!1,1745210146)})],1)],2):e._e()],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(e){a("TXMa")},"data-v-440b8eaa",null).exports,r=a("/ocq"),i={data:function(){return{form:{username:"",password:""}}},methods:{submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},u=a("VU/8")(i,c,!1,null,null,null).exports;n.default.use(r.a);var m=new r.a({routes:[{path:"/",name:"HelloWorld",component:u}]}),d=a("zL8q"),p=a.n(d);a("tvR6");n.default.use(p.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:m,components:{App:l},template:"<App/>"})},TXMa:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9f910b79444120628c6c.js.map